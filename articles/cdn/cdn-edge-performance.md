<properties 
    pageTitle="CDN - 分析邊緣效能" 
    description="在 Microsoft Azure CDN 中分析邊緣節點效能。 邊緣效能分析詳細提供 CDN 的資訊流量和頻寬使用量。" 
    services="cdn" 
    documentationCenter=".NET" 
    authors="camsoper" 
    manager="dwrede" 
    editor=""/>

<tags 
    ms.service="cdn" 
    ms.workload="tbd" 
    ms.tgt_pltfrm="na" 
    ms.devlang="na" 
    ms.topic="article" 
    ms.date="12/02/2015" 
    ms.author="casoper"/>

# 在 Microsoft Azure CDN 中分析邊緣節點效能

## 概觀
邊緣效能分析詳細提供 CDN 的資訊流量和頻寬使用量。 這項資訊可用來產生趨勢統計資料，讓您深入了解您的資產如何放入快取中和傳遞到您的用戶端。 這進而可讓您產生策略來設法最佳化內容傳遞，以及決定應該解決什麼問題以充分利用 CDN。 如此一來，不僅能夠改善資料傳遞的效能，還能夠減少 CDN 成本。

> [AZURE.NOTE] 邊緣效能分析是一項功能的高階 CDN 層。  如需標準和高階 CDN 功能的比較，請參閱 [Azure CDN 概觀](cdn-overview.md)。
>
> 所有報告都採用 UTC/GMT 標記法來指定日期/時間。

## 報告和記錄收集

邊緣效能分析模組必須收集 CDN 活動資料，才能產生報告。 此收集處理程序一天執行一次，涵蓋前一天發生的活動。 這表示報告的統計資料代表它處理時的那一天的統計資料樣本，不一定包含當天的完整資料集。 這些報告的主要功能在於評估效能。 它們不應該用於計費用途或確切的數值統計資料。

> [AZURE.NOTE] 90 天至少可產生邊緣效能分析報表的未經處理資料。

## 儀表板

[邊緣效能分析] 儀表板會透過圖表和統計資料，追蹤目前和歷史 CDN 流量。 使用此儀表板來偵測您帳戶上的 CDN 流量效能的近期和長期趨勢。

此儀表板由下列元件組成：

* 互動式圖表，可呈現關鍵度量和趨勢。
* 時間表，可看出關鍵度量和趨勢的長期模式。
* 關鍵度量和統計資訊，依整體效能、使用量和效率來測量，指出 CDN 網路如何改善網站流量。

### 存取邊緣效能儀表板

1. 從 CDN 基本資料] 分頁中，按一下 [ **管理** ] 按鈕。

    ![[CDN 設定檔] 刀鋒視窗的 [管理] 按鈕](./media/cdn-edge-performance/cdn-manage-btn.png)
    
    隨即開啟 CDN 管理入口網站。
    
2. 將滑鼠停留在 **分析** 索引標籤，然後將滑鼠停留在 **邊緣效能分析** 飛出視窗。  按一下 [ **儀表板**。
    
    邊緣節點分析儀表板隨即顯示。

### 圖表

儀表板包含的圖表會根據正下方的時間表中選取的期間，追蹤這段期間內的度量。  圖表正下方顯示的時間表可繪製最多去過兩年的 CDN 活動。

#### 使用圖表

* 依預設會繪製過去 30 天的快取效率。
* 此圖表是根據每天整理的資料產生。
* 將滑鼠暫留在線條圖上的某一天，將指出日期和那一天的度量值。
* 按一下 [反白顯示週末] 可在圖表上覆疊一個代表週末的淺灰色垂直長條。 這種覆疊有助於識別週末的流量模式。
* 按一下 [檢視 1 年前] 可在圖表上覆疊前一年同期間的活動。 這種比較可讓您深入了解長期的 CDN 使用模式。 圖表右上角的圖例指出每個線條圖的色彩代碼。

#### 更新圖表

* 時間範圍：執行下列其中一項：
    * 在時間表中選取需要的區域。 將會以對應至所選期間的資料來更新圖表。
    * 按兩下圖表以顯示所有可用的歷史資料，最多為兩年。
* 度量：按一下所需度量旁邊顯示的圖表圖示。 將會以相對應度量的資料來重新整理圖表和時間表。


### 關鍵度量和統計資料

#### 效能度量

這些度量的用途在於了解是否可以改善快取效率。 快取效率帶來的主要優點如下：

* 降低原始伺服器的負載，進而提供：
    * 更好的 Web 伺服器效能。
    * 降低營運成本。
* 加速資料傳遞，因為將直接從 CDN 提供更多要求。

欄位 | 說明
------|------------
快取效率 | 表示從快取提供傳輸的資料百分比。 這個度量會測量所要求內容的快取版本何時直接從 CDN (邊緣伺服器) 提供給要求者 (例如網頁瀏覽器)
命中率 | 表示從快取提供的要求百分比。 這個度量會測量所要求內容的快取版本何時直接從 CDN (邊緣伺服器) 提供給要求者 (例如網頁瀏覽器)。
遠端位元組 % - 無快取組態 | 表示從原始伺服器提供給 CDN (邊緣伺服器) 的流量百分比，這些流量不會由於「略過快取」功能 (HTTP 規則引擎) 而快取。
遠端位元組 % - 過期的快取 | 指出由於重新驗證過時內容，而從原始伺服器提供給 CDN (邊緣伺服器) 的流量百分比。

#### 用量度量

這些度量的用途在於讓您深入了解下列成本削減措施：

* 透過 CDN 將營運成本降至最低。
* 透過快取效率和壓縮減少 CDN 支出。

> [AZURE.NOTE] 流量磁碟區的數字代表用於計算比例和百分比，並可能只顯示一部分總流量大量客戶的流量。

欄位 | 說明
------|------------
平均輸出位元組 | 表示從 CDN (邊緣伺服器) 提供給要求者 (例如網頁瀏覽器) 的每個要求所平均傳輸的位元組數。
無快取組態位元組速率 | 表示從 CDN (邊緣伺服器) 提供給的要求者 (例如網頁瀏覽器) 的流量百分比，這些流量不會由於「略過快取」功能而快取。
壓縮的位元組速率 | 表示以壓縮格式從 CDN (邊緣伺服器) 傳送至要求者 (例如網頁瀏覽器) 的流量百分比。
輸出位元組 | 表示從 CDN (邊緣伺服器) 傳遞至要求者 (例如網頁瀏覽器) 的資料量 (位元組)。  
輸入位元組 | 表示從要求者 (例如網頁瀏覽器) 傳送至 CDN (邊緣伺服器) 的資料量 (位元組)。
遠端位元組 | 表示從 CDN 和客戶原始伺服器傳送至 CDN (邊緣伺服器) 的資料量 (位元組)。

#### 效能度量

這些度量的用途在於追蹤您的流量的整體 CDN 效能。 

欄位 | 說明
------|------------
傳輸速率 | 表示內容從 CDN 傳輸至要求者的平均速率。
持續時間 | 表示將資產傳遞至要求者 (例如網頁瀏覽器) 所花費的平均時間 (毫秒)。
壓縮的要求速率 | 表示以壓縮格式從 CDN (邊緣伺服器) 傳遞至要求者 (例如網頁瀏覽器) 的點擊百分比。
4xx 錯誤率 | 表示產生 4xx 狀態碼的點擊百分比。
5xx 錯誤率 | 表示產生 5xx 狀態碼的點擊百分比。
點擊 | 表示對 CDN 內容的要求次數。

#### 安全流量度量

這些度量的用途在於追蹤 HTTPS 流量的 CDN 效能。

欄位 | 說明
------|------------
安全快取效率 | 表示從快取提供的 HTTPS 要求所傳輸的資料百分比。 這個度量會測量所要求內容的快取版本何時直接從 CDN (邊緣伺服器) 透過 HTTPS 提供給要求者 (例如網頁瀏覽器)。
安全傳輸速率 | 表示內容從 CDN (邊緣伺服器) 透過 HTTPS 傳輸至要求者 (例如網頁瀏覽器) 的平均速率。
平均安全持續期間 | 表示將資產透過 HTTPS 傳遞至要求者 (例如網頁瀏覽器) 所花費的平均時間 (毫秒)。
安全點擊 | 表示對 CDN 內容的 HTTPS 要求次數。
安全輸出位元組 | 表示從 CDN (邊緣伺服器) 傳遞至要求者 (例如網頁瀏覽器) 的 HTTPS 流量 (位元組)。

## 報告

此模組中的每一份報告包含圖表和統計資料，指出各種不同度量 (例如，HTTP 狀態碼、快取狀態碼、要求 URL 等) 的頻寬和流量用量。 這項資訊可用來深入探究內容如何提供給用戶端，並微調 CDN 行為，以改善資料傳遞效能。

### 存取邊緣效能報告

1. 從 CDN 基本資料] 分頁中，按一下 [ **管理** ] 按鈕。

    ![[CDN 設定檔] 刀鋒視窗的 [管理] 按鈕](./media/cdn-edge-performance/cdn-manage-btn.png)
    
    隨即開啟 CDN 管理入口網站。
    
2. 將滑鼠停留在 **分析** 索引標籤，然後將滑鼠停留在 **邊緣效能分析** 飛出視窗。  按一下 [ **HTTP 大型物件**。
    
    邊緣節點分析報告畫面隨即顯示。
    
報告 | 說明
-------|------------
每日摘要 | 可讓您檢視一段指定期間內的每日流量趨勢。 此圖形上的每個橫條都代表特定日期。 橫條大小表示那一天發生的點擊總數。
每小時摘要 | 可讓您檢視一段指定期間內的每小時流量趨勢。 此圖形上的每個橫條都代表特定日期的單一小時。 橫條大小表示那一小時發生的點擊總數。
通訊協定 | 顯示 HTTP 和 HTTPS 通訊協定之間的流量分解。 環圈圖指出每一種通訊協定發生的點擊百分比。
HTTP 方法 | 可讓您快速了解用於要求您的資料的 HTTP 方法。 一般而言，最常見的 HTTP 要求方法是 GET、HEAD 和POST。 環圈圖指出每一種 HTTP 要求方法發生的點擊百分比。
URL | 包含的圖形顯示前 10 名要求的 URL。 每個 URL 會顯示一個橫條。 橫條高度指出在報告所涵蓋的時間範圍內，特定 URL 已產生的點擊次數。 此圖形正下方顯示前 100 名要求的 URL 的統計資料。
CNAME | 包含的圖形顯示在報告的時間範圍內，用來要求資產的前 10 名 CNAME。 此圖形正下方顯示前 100 名要求的 CNAME 的統計資料。 
原始來源 | 包含的圖形顯示在指定的期間內，要求資產的前 10 名 CDN 或客戶原始伺服器。 此圖形正下方顯示前 100 名要求的 CDN 或客戶原始伺服器的統計資料。 客戶原始伺服器由 [目錄名稱] 選項中所定義的名稱來識別。
地區 POP | 顯示透過特定存在點 (POP) 路由傳送的流量。 三個字母的縮寫代表 CDN 網路中的 POP。
用戶端 | 包含的圖形顯示在指定的期間內要求資產的前 10 名用戶端。 就此報告而言，來自相同 IP 位址的所有要求都視為來自相同用戶端。 此圖形正下方顯示前 100 名用戶端的統計資料。 此報告有助於判斷前幾名用戶端的下載活動模式。
快取狀態 | 提供快取行為的詳細分解，有助於找出改善整體使用者經驗的方法。 由於最快的效能來自快取點擊，您可以將快取遺漏及過期快取點擊的情況降至最低，以最佳化資料傳送速度。
NONE 詳細資料 | 包含的圖形針對未檢查快取內容新鮮度的資產，顯示在指定期間內的前 10 名 URL。 此圖形正下方顯示這幾種資產的前 100 名 URL 的統計資料。
CONFIG_NOCACHE 詳細資料 | 包含的圖形顯示由於客戶的 CDN 組態而未快取的資產的前 10 名 URL。 這幾種資產直接從原始伺服器提供。 此圖形正下方顯示這幾種資產的前 100 名 URL 的統計資料。
UNCACHEABLE 詳細資料 | 包含的圖形顯示由於要求標頭資料而無法快取的資產的前 10 名 URL。 此圖形正下方顯示這幾種資產的前 100 名 URL 的統計資料。
TCP_HIT 詳細資料 | 包含的圖形顯示立即從快取提供的資產的前 10 名 URL。 此圖形正下方顯示這幾種資產的前 100 名 URL 的統計資料。
TCP_MISS 詳細資料 | 包含的圖形顯示快取狀態為 TCP_MISS 的資產的前 10 名 URL。 此圖形正下方顯示這幾種資產的前 100 名 URL 的統計資料。
TCP_EXPIRED_HIT 詳細資料 | 包含的圖形顯示直接從 POP 提供的過時資產的前 10 名 URL。 此圖形正下方顯示這幾種資產的前 100 名 URL 的統計資料。
TCP_EXPIRED_MISS 詳細資料 | 包含的圖形顯示必須從原始伺服器擷取新版本的過時資產的前 10 名 URL。 此圖形正下方顯示這幾種資產的前 100 名 URL 的統計資料。
TCP_CLIENT_REFRESH_MISS 詳細資料 | 包含的橫條圖顯示由於用戶端發出無快取要求，而從原始伺服器擷取的資產的前 10 名 URL。 此圖表正下方顯示這幾種要求的前 100 名 URL 的統計資料。
用戶端要求類型 | 表示 HTTP 用戶端 (例如瀏覽器) 發出的要求類型。 此報告包含的環圈圖可讓您了解要求的處理方式。 圖表下方顯示每個要求類型的頻寬和流量資訊。
使用者代理程式 | 包含的橫條圖顯示透過我們的 CDN 來要求內容的前 10 名使用者代理程式。 一般而言，使用者代理程式是網頁瀏覽器、媒體播放器或行動電話瀏覽器。 此圖表正下方顯示前 100 名使用者代理程式的統計資料。
訪客來源 | 包含的橫條圖顯示透過我們的 CDN 所存取的內容的前 10 名訪客來源。 一般而言，訪客來源是連結到內容的網頁或資源的 URL。 圖形下方提供前 100 名訪客來源的詳細資訊。
壓縮類型 | 包含的環圈圖詳細分解所要求的資產是否由我們的邊緣伺服器壓縮。 壓縮的資產百分比依使用的壓縮類型進行分解。 圖形下方提供每個壓縮類型和狀態的詳細資訊。
檔案類型 | 包含的橫條圖顯示您的帳戶中已透過我們的 CDN 來要求的前 10 名檔案類型。 這份報表，檔案類型由資產的副檔名和網際網路媒體類型 (例如.html \[text/html\]，.htm \[text/html\]，.aspx \[text/html\] 等等。)。 圖形下方提供前 100 名檔案類型的詳細資訊。
唯一的檔案 | 包含的圖形繪製在指定期間內的特定一天所要求的唯一資產總數。
權杖驗證摘要 | 包含的圓形圖提供所要求的資產是否受權杖型驗證保護的快速概觀。 圖表中根據嘗試的驗證結果來顯示受保護的資產。
權杖驗證拒絕詳細資料 | 包含的橫條圖可讓您檢視由於權杖型驗證而被拒絕的前 10 名要求。
HTTP 回應碼 | 分解由我們的邊緣伺服器傳遞至 HTTP 用戶端的 HTTP 狀態碼 (例如，200 確定、403 禁止、404 找不到 404 等等)。 圓形圖可讓您快速評估資產的提供方式。 圖表下方提供每個回應碼的詳細統計資料。
404 錯誤 | 包含的橫條圖可讓您檢視導致「404 找不到」回應碼的前 10 名要求。
403 錯誤 | 包含的橫條圖可讓您檢視導致「403 禁止」回應碼的前 10 名要求。 當客戶原始伺服器或我們 POP 的邊緣伺服器拒絕要求時，就會發生「403 禁止」回應碼。
4xx 錯誤 | 包含的橫條圖可讓您檢視導致 400 系列回應碼的前 10 名要求。 這份報告中排除「403 找不到」和「404 禁止」回應碼。 通常，由於用戶端錯誤而拒絕要求時，就會發生 4xx 回應碼。
504 錯誤 | 包含的橫條圖可讓您檢視導致「504 閘道逾時」回應碼的前 10 名要求。 當 HTTP Proxy 嘗試與其他伺服器通訊而發生逾時，就會發生「504 閘道逾時」回應碼。 就我們的 CDN 而言，「504 閘道逾時」回應碼通常發生於邊緣伺服器無法與客戶原始伺服器建立通訊的情況。
502 錯誤 | 包含的橫條圖可讓您檢視導致「502 錯誤的閘道」回應碼的前 10 名要求。 當伺服器和 HTTP Proxy 之間發生 HTTP 通訊協定失敗時，就會發生「502 錯誤的閘道」回應碼。 就我們的 CDN 而言，「502 錯誤的閘道」回應碼通常發生於客戶原始伺服器傳回無效回應給邊緣伺服器的情況。 無法剖析或不完整的回應就是無效。
5xx 錯誤 | 包含的橫條圖可讓您檢視導致 500 系列回應碼的前 10 名要求。  這份報告中排除「502 錯誤的閘道」和「504 閘道逾時」回應碼。

## 另請參閱
* [Azure CDN 概觀](cdn-overview.md)
* [Microsoft Azure CDN 中的即時統計資料](cdn-real-time-stats.md)
* [使用規則引擎覆寫預設的 HTTP 行為](cdn-rules-engine.md)
* [進階 HTTP 報告](cdn-advanced-http-reports.md)





